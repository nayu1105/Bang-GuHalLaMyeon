<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì‹¤ê±°ë˜ê°€ ì¡°íšŒ ë©”ì¸</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>

    <!-- JavaScript -->
    <script src="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>

    <!-- CSS -->
    <link
      rel="stylesheet"
      href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css"
    />
    <!-- Default theme -->
    <link
      rel="stylesheet"
      href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/default.min.css"
    />
    <!-- Semantic UI theme -->
    <link
      rel="stylesheet"
      href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/semantic.min.css"
    />
    <!-- Bootstrap theme -->
    <link
      rel="stylesheet"
      href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/bootstrap.min.css"
    />
    <!-- kakao map  -->
    <script
      type="text/javascript"
      src="//dapi.kakao.com/v2/maps/sdk.js?appkey=9fa060a9b4a46b0e7e27c1cfe9d4e2f4&libraries=services,clusterer"
    ></script>

    <link rel="stylesheet" href="/css/login.css" type="text/css" />
    <link rel="stylesheet" href="/css/main.css" type="text/css" />
    <link rel="stylesheet" href="/css/map.css" type="text/css" />
    <link rel="stylesheet" href="/css/menu.css" type="text/css" />
    <style>
      #topContainer {
        margin-top: 150px;
      }

      .page-link {
        color: #000;
        background-color: #fff;
        border: 1px solid #ccc;
      }

      .page-item.active .page-link {
        z-index: 1;
        color: white;
        font-weight: bold;
        background-color: #212529 !important;
        border-color: #212529 !important;
      }

      .page-link:focus,
      .page-link:hover {
        color: #000;
        background-color: #fafafa;
        border-color: #ccc;
      }
    </style>
  </head>
  <body>
    <div class="container-fluid p-0">
      <div class="wrapper">
        <!-- nav PART start -->
        <div class="nav_part">
          <!-- nav start -->
          <nav class="navbar fixed-top navbar-expand navbar-dark bg-dark">
            <div class="container-fluid">
              <a class="navbar-brand" href="/html/index.html">ğŸ  êµ¬í•´ì¤˜ Home</a>
              <button
                class="navbar-toggler"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#navbarNavAltMarkup"
                aria-controls="navbarNavAltMarkup"
                aria-expanded="false"
                aria-label="Toggle navigation"
              >
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav">
                  <a class="nav-link active" aria-current="page" href="/html/index.html">ë©”ì¸</a>
                  <a class="nav-link" href="/board">ê³µì§€ì‚¬í•­</a>
                  <a class="nav-link" href="/arround">ì£¼ë³€ ì—…ì¢…</a>
                  <a class="nav-link" href="/event" id="btnEventManage">ì´ë²¤íŠ¸ ê´€ë¦¬</a>
                </div>
              </div>
            </div>

            <!-- ë©”ë‰´ ë²„íŠ¼ -->
            <button
              type="button"
              class="nav_btn btn btn-outline-light navLogin"
              data-bs-toggle="modal"
              data-bs-target="#exampleModal"
            >
              ë¡œê·¸ì¸
            </button>
            <button
              type="button"
              class="nav_btn btn btn-outline-light navLogout loginState"
              data-bs-toggle="modal"
              data-bs-target="#exampleModal2"
              id="btnLogout"
            >
              ë¡œê·¸ì•„ì›ƒ
            </button>
            <button type="button" class="nav_btn btn btn-outline-light navSignup">
              <a href="/html/register.html">íšŒì›ê°€ì…</a>
            </button>
            <button type="button" class="nav_btn btn btn-outline-light loginState navProfile">
              <a href="/html/user/profile.html">ë‚´ ì •ë³´</a>
            </button>
            <button type="button" class="nav_btn btn btn-outline-light loginState navBookmark">
              <a href="/html/house/houseFavorite.html">ë¶ë§ˆí¬</a>
            </button>
          </nav>
          <!-- nav end -->
        </div>
        <!-- nav PART end -->

        <!-- Modal -->
        <div
          class="modal fade"
          id="exampleModal"
          tabindex="-1"
          aria-labelledby="exampleModalLabel"
          aria-hidden="true"
        >
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <button
                  type="button"
                  class="btn-close"
                  data-bs-dismiss="modal"
                  aria-label="Close"
                ></button>
              </div>
              <div class="modal-body">
                <div id="loginBox">
                  <form>
                    <div id="loginBtnBox">
                      <h2 id="login">ë¡œê·¸ì¸</h2>
                    </div>

                    <div class="mb-3">
                      <label for="loginEmail" class="form-label">ì•„ì´ë””</label>
                      <input
                        type="email"
                        class="form-control"
                        id="loginEmail"
                        placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”."
                        aria-describedby="emailHelp"
                        value="admin@admin.com"
                        autocomplete="off"
                      />
                    </div>
                    <div class="mb-3">
                      <label for="loginPassword" class="form-label">ë¹„ë°€ë²ˆí˜¸</label>
                      <input
                        type="password"
                        class="form-control"
                        id="loginPassword"
                        placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”."
                        value="1234"
                        autocomplete="off"
                      />
                    </div>
                    <div id="loginBtnBox">
                      <button
                        type="button"
                        class="btn btn-primary"
                        id="btnLogin"
                        data-bs-dismiss="modal"
                        aria-label="Close"
                      >
                        ë¡œê·¸ì¸
                      </button>
                    </div>
                    <br />
                    <div id="loginBtnBox">
                      <!--
                      <button type="submit" class="btnfind">ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</button>
                      <div id="divInline">|</div> -->
                      <button type="submit" class="btnfind">
                        <a href="/html/register.html">íšŒì›ê°€ì…</a>
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- logout Modal -->
        <div
          class="modal fade"
          id="exampleModal2"
          tabindex="-1"
          aria-labelledby="exampleModalLabel"
          aria-hidden="true"
        >
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤.</h5>
              </div>
              <div class="modal-footer">
                <button
                  id="goMain"
                  type="button"
                  class="btn btn-primary gomain"
                  data-bs-dismiss="modal"
                  aria-label="Close"
                >
                  ë©”ì¸ìœ¼ë¡œ ê°€ê¸°
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="topContainer" class="container">
      <!-- 		<%-- nav bar --%> <%@ include file="../login.jsp"%> -->
      <h4 class="text-center mt-4">ì‹¤ê±°ë˜ê°€ ì¡°íšŒ</h4>

      <!-- ê²€ìƒ‰ -->
      <div class="input-group mb-3 mt-4">
        <select
          class="form-select"
          id="sido"
          aria-label="Default select example"
          onchange="setSido(this); getGugun();"
        >
          <option selected value="">ë„/ê´‘ì—­ì‹œ</option>
        </select>
        <select
          class="form-select"
          id="gugun"
          aria-label="Default select example"
          onchange="setGugun(this); houseSearch()"
        >
          <option value="">ì‹œ/êµ°/êµ¬</option>
        </select>
      </div>

      <div class="input-group mb-3">
        <select
          class="form-select"
          id="searchCategory"
          aria-label="Default select example"
          onchange="setCategory(this); houseSearch();"
        >
          <option selected value="ì•„íŒŒíŠ¸ë³„">ì•„íŒŒíŠ¸ë³„</option>
          <option value="ë™ë³„">ë™ë³„</option>
        </select>
        <input
          class="form-control"
          type="text"
          id="searchWord"
          placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
          aria-label="default input example"
        />
        <button class="btn btn-dark" type="button" id="btnHouseSearch" onclick="houseSearch()">
          ì¡°íšŒ
        </button>
      </div>

      <div class="container">
        <div class="map_wrap">
          <!-- map start -->
          <div id="map"></div>
          <!-- map end -->
          <div id="menu_wrap">
            <div>
              <p class="menu_title">ê±°ë˜ ì •ë³´</p>
            </div>

            <ul id="placesList"></ul>
          </div>
        </div>
      </div>
      <!-- í…Œì´ë¸” -->
      <!-- <table class="table table-hover">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">ì‹œêµ¬</th>
            <th scope="col">êµ¬êµ°</th>
            <th scope="col">ë™</th>
            <th scope="col">ì•„íŒŒíŠ¸ëª…</th>
            <th scope="col">ì¸µ</th>
            <th scope="col">ë©´ì </th>
            <th scope="col">ê±°ë˜ê¸ˆì•¡</th>
          </tr>
        </thead>
        <tbody id="aptTbody"></tbody>
      </table> -->

      <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
      <!-- <nav id="paginationWrapper" class="mt-4"></nav> -->

      <!-- Board Detail Modal -->
      <!-- <div
        class="modal fade"
        id="houseDetailModal"
        tabindex="-1"
        aria-labelledby="exampleModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-dialog-centered modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">ì•„íŒŒíŠ¸ ìƒì„¸ì¡°íšŒ</h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <table class="table table-hover" style="cursor: default">
                <tbody>
                  <tr>
                    <td>ê¸€ ë²ˆí˜¸</td>
                    <td id="houseSeqDetail">#</td>
                  </tr>
                  <tr>
                    <td>ì‹œë„</td>
                    <td id="sidoDetail">#</td>
                  </tr>
                  <tr>
                    <td>êµ¬êµ°</td>
                    <td id="gugunDetail">#</td>
                  </tr>
                  <tr>
                    <td>ë™</td>
                    <td id="dongDetail">#</td>
                  </tr>
                  <tr>
                    <td>ì•„íŒŒíŠ¸ëª…</td>
                    <td id="aptNameDetail">#</td>
                  </tr>
                  <tr>
                    <td>ì¸µ</td>
                    <td id="floorDetail">#</td>
                  </tr>
                  <tr>
                    <td>ë©´ì </td>
                    <td id="areaDetail">#</td>
                  </tr>
                  <tr>
                    <td>ê±°ë˜ê¸ˆì•¡</td>
                    <td id="dealAmountDetail">#</td>
                  </tr>
                  <tr>
                    <td>ê°œì„¤ì—°ë„</td>
                    <td id="buildYearDetail">#</td>
                  </tr>
                  <tr>
                    <td>ê±°ë˜ì—°ë„</td>
                    <td id="dealYearDetail">#</td>
                  </tr>
                  <tr>
                    <td>ê±°ë˜ì›”</td>
                    <td id="dealMonthDetail">#</td>
                  </tr>
                </tbody>
              </table>

              <button id="btnHouseFavorite" type="button" class="btn btn-dark">ë¶ë§ˆí¬</button>
            </div>
          </div>
        </div>
      </div> -->
    </div>

    <!-- footer start -->
    <!-- 
    <footer>
      <ul class="footer-list p-0 m-0">
        <li><a href="#">ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</a></li>
        <li><a href="#">ì´ìš© ì•½ê´€</a></li>
        <li><a href="#">ì˜¤ì‹œëŠ” ê¸¸</a></li>
        <li>&copy; SSAFY 9ì¡° ë°˜ìœ ì§„ ì—¼ì •ì•„</li>
      </ul>
    </footer> -->
    <!-- footer end -->
    <script src="/js/util.js"></script>
    <script>
      var OFFSET = 0; // offset
      var SEARCH_WORD = ""; // ê²€ìƒ‰ì–´

      // Pagination
      var LIST_ROW_COUNT = 10; // limit, í•œ í˜ì´ì§€ ë‚´ì— ë³´ì—¬ì£¼ëŠ” ê¸€ì˜ ê°œìˆ˜
      var PAGE_LINK_COUNT = 10; // í˜ì´ì§€ ë§í¬ë¥¼ ëª‡ ê°œ ë§Œë“¤ ê²ƒì¸ê°€. ê·¸ ë°‘ì— 10ê°œ ì´ë ‡ê²Œ ìˆëŠ”ê±°
      var CURRENT_PAGE_INDEX = 1; // í˜„ì¬ í˜ì´ì§€ ì¸ë±ìŠ¤
      var TOTAL_LIST_ITEM_COUNT = 0; // ì´ ì•„ì´í…œ ê±´ ìˆ˜

      var SUCCESS = 1;

      // ì´ˆê¸° ê²€ìƒ‰ ë³€ìˆ˜ ê°’
      let sidoCode = "11";
      // ì„œìš¸ íŠ¹ë³„ì‹œ
      let gugunCode = "11110";
      // ì¢…ë¡œêµ¬
      let searchCategory = "ì „ì²´";

      window.onload = () => {
        getSido();
        houseSearch();

        // document.querySelector("#btnHouseFavorite").onclick = (e) => {
        //   let houseSeq = e.path[1].querySelector("#houseSeqDetail").innerHTML;
        //   houseFavorite(houseSeq);
        // };
      };

      // async function houseFavorite(houseSeq) {
      //   let url = "/favorite/favoriteInsert";
      //   let urlParams = "?houseSeq=" + houseSeq;

      //   let fetchOptions = {
      //     method: "GET",
      //   };

      //   try {
      //     let res = await fetch(url + urlParams, fetchOptions);
      //     let data = await res.json();

      //     if (data.result == "success") {
      //       alertify.success("ë¶ë§ˆí¬ ë˜ì—ˆìŠµë‹ˆë‹¤.");
      //       setTimeout(() => {
      //         window.location.href = "/favorite/favoriteMain";
      //       }, 800);
      //     } else if (data.result == "fail") {
      //       alertify.error(
      //         "ë¶ë§ˆí¬ ê³¼ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. <br> ë¶ë§ˆí¬ëŠ” ìµœëŒ€ 10ê°œ ê°€ëŠ¥í•˜ë©°, <br> ì¤‘ë³µ ë“±ë¡ì´ ë¶ˆê°€í•©ë‹ˆë‹¤."
      //       );
      //     }
      //   } catch (err) {
      //     console.log(err);
      //     alertify.error("ë¶ë§ˆí¬ ê³¼ì •ì—ì„œ ë¬¸ì œê°€ ìƒê²¼ìŠµë‹ˆë‹¤.");
      //   }
      // }

      // async function houseDetail(houseSeq) {
      //   let url = "/houses/";
      //   let urlParams = houseSeq;
      //   console.log(houseSeq);

      //   let fetchOptions = {
      //     method: "GET",
      //   };

      //   try {
      //     let res = await fetch(url + urlParams, fetchOptions);
      //     let data = await res.json();
      //     makeDetailHtml(data);
      //   } catch (err) {
      //     console.log(err);
      //     alertify.error("ì‹¤ê±°ë˜ê°€ ì¡°íšŒ ê³¼ì •ì—ì„œ ë¬¸ì œê°€ ìƒê²¼ìŠµë‹ˆë‹¤.");
      //   }
      // }

      // async function makeDetailHtml(detail) {
      //   let houseSeq = detail.no;
      //   let sido = detail.sido;
      //   let gugun = detail.gugun;
      //   let dong = detail.dong;
      //   let aptName = detail.aptName;
      //   let floor = detail.floor;
      //   let area = detail.area;
      //   let dealAmount = detail.dealAmount;
      //   let buildYear = detail.buildYear;
      //   let dealYear = detail.dealYear;
      //   let dealMonth = detail.dealMonth;

      //   document.querySelector("#houseDetailModal").setAttribute("data-no", houseSeq);
      //   document.querySelector("#houseSeqDetail").innerHTML = houseSeq;
      //   document.querySelector("#dongDetail").innerHTML = dong;
      //   document.querySelector("#gugunDetail").innerHTML = gugun;
      //   document.querySelector("#sidoDetail").innerHTML = sido;
      //   document.querySelector("#aptNameDetail").innerHTML = aptName;
      //   document.querySelector("#floorDetail").innerHTML = floor;
      //   document.querySelector("#areaDetail").innerHTML = area;
      //   document.querySelector("#dealAmountDetail").innerHTML = dealAmount;
      //   document.querySelector("#buildYearDetail").innerHTML = buildYear;
      //   document.querySelector("#dealYearDetail").innerHTML = dealYear;
      //   document.querySelector("#dealMonthDetail").innerHTML = dealMonth;

      //   let modalDetail = new bootstrap.Modal(document.querySelector("#houseDetailModal"));
      //   modalDetail.show();
      // }

      async function houseSearch() {
        let searchWord = document.querySelector("#searchWord").value;
        var urlParams;
        if (searchCategory == "ì•„íŒŒíŠ¸ë³„") {
          console.log("ì•„íŒŒíŠ¸");
          urlParams =
            "?sido=" + sidoCode + "&gugun=" + gugunCode + "&dong=" + "&aptName=" + searchWord;
        } else if (searchCategory == "ë™ë³„") {
          console.log("ë™ë³„");
          urlParams =
            "?sido=" + sidoCode + "&gugun=" + gugunCode + "&aptName=" + "&dong=" + searchWord;
        } else if (searchCategory == "ì „ì²´") {
          console.log("ì „ì²´");
          urlParams =
            "?sido=" +
            sidoCode +
            "&gugun=" +
            gugunCode +
            "&dong=" +
            searchWord +
            "&aptName=" +
            searchWord;
        }

        let fetchOptions = {
          method: "GET",
        };
        try {
          let response = await fetch("/houses/search" + urlParams, fetchOptions);
          let data = await response.json();
          if (data.result == SUCCESS) {
            makeAptListHtml(data.list);
          } else {
            alertify.error("ì‹¤ê±°ë˜ ì¡°íšŒì—ì„œ ë¬¸ì œê°€ ìƒê²¼ìŠµë‹ˆë‹¤.");
          }
        } catch (err) {
          console.log(err);
          alertify.error("ì‹¤ê±°ë˜ ì¡°íšŒì—ì„œ ë¬¸ì œê°€ ìƒê²¼ìŠµë‹ˆë‹¤.");
        }
      }

      async function getSido() {
        let url = "/city";
        let urlParam = "?option=1";

        let fetchOptions = {
          method: "GET",
        };

        try {
          let response = await fetch(url + urlParam, fetchOptions);
          let data = await response.json();
          if (data.result == SUCCESS) {
            makeSidoListHtml(data.list);
          } else {
            alertify.error("ë„ì‹œì´ë¦„ì„ ì½ëŠ” ê³¼ì •ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ");
          }
        } catch (error) {
          alertify.error("ë„ì‹œì´ë¦„ì„ ì½ëŠ” ê³¼ì •ì—ì„œ ì˜¤ë¥˜ê°€ã„´ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ");
        }
      }

      function makeSidoListHtml(list) {
        let listHtml = `<option selected>ë„/ê´‘ì—­ì‹œ</option>`;
        list.forEach((el) => {
          let sidoName = el.sidoName;
          let sidoCode = el.sidoCode;

          listHtml += `<option data-sidoCode=${sidoCode} value=${sidoCode}>${sidoName}</option>`;
        });

        document.querySelector("#sido").innerHTML = listHtml;
      }

      async function getGugun() {
        searchCategory = "ì•„íŒŒíŠ¸ë³„";
        let url = "/city";
        let urlParams = "?option=2&sidoCode=" + sidoCode;
        let fetchOptions = {
          method: "GET",
        };
        try {
          let response = await fetch(url + urlParams, fetchOptions);
          let data = await response.json();
          if (data.result == SUCCESS) {
            makeGugunListHtml(data.list);
          } else {
            alertify.error("êµ¬êµ°ì´ë¦„ì„ ì½ëŠ” ê³¼ì •ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ");
          }
        } catch (error) {
          alertify.error("êµ¬êµ°ì´ë¦„ì„ ì½ëŠ” ê³¼ì •ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ");
        }
      }

      function makeGugunListHtml(list) {
        let listHtml = `<option selected>ì‹œ/êµ°/êµ¬</option>`;
        list.forEach((el) => {
          var gugunName = el.gugunName;
          var gugunCode = el.gugunCode;

          listHtml += `<option data-gugunCode=${gugunCode} value=${gugunCode}>${gugunName}</option>`;
        });

        document.querySelector("#gugun").innerHTML = listHtml;
      }

      function setCategory(category) {
        console.log(category.value);
        searchCategory = category.value;
      }

      function setSido(el) {
        sidoCode = el.value;
      }

      function setGugun(el) {
        gugunCode = el.value;
      }

      var map = new kakao.maps.Map(
        document.getElementById("map"), // ì§€ë„ë¥¼ í‘œì‹œí•  div
        {
          center: new kakao.maps.LatLng(36.2683, 127.6358), // ì§€ë„ì˜ ì¤‘ì‹¬ì¢Œí‘œ
          level: 14, // ì§€ë„ì˜ í™•ëŒ€ ë ˆë²¨
        }
      );
      // ë§ˆì»¤ í´ëŸ¬ìŠ¤í„°ëŸ¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
      var clusterer = new kakao.maps.MarkerClusterer({
        map: map, // ë§ˆì»¤ë“¤ì„ í´ëŸ¬ìŠ¤í„°ë¡œ ê´€ë¦¬í•˜ê³  í‘œì‹œí•  ì§€ë„ ê°ì²´
        averageCenter: true, // í´ëŸ¬ìŠ¤í„°ì— í¬í•¨ëœ ë§ˆì»¤ë“¤ì˜ í‰ê·  ìœ„ì¹˜ë¥¼ í´ëŸ¬ìŠ¤í„° ë§ˆì»¤ ìœ„ì¹˜ë¡œ ì„¤ì •
        minLevel: 10, // í´ëŸ¬ìŠ¤í„° í•  ìµœì†Œ ì§€ë„ ë ˆë²¨
      });

      var markers = [];

      function makeAptListHtml(list) {
        let listHtml = ``;

        list.forEach((el, index) => {
          // makeMark(el);
          let aptName = el.aptName;
          let dealAmount = el.dealAmount;
          let address = el.address;
          let area = el.area;
          let floor = el.floor;
          listHtml += ` <div class="card"> 
                          <img src="/img/building1.jpg" class="card-img-top" /> 
                          <div class="card-body">
                            <p class="card-title">${el.aptName}  ${dealAmount}</p>
                            <p class="card-subtitle" >${el.sido} ${el.gugun} ${el.dong} ${el.jibun}</p>
                            <p class="card-text">${el.area}ã¡ ${el.floor}ì¸µ</p> 
                            <p class="card-text">ê±°ë˜ë‚ ì§œ : ${el.dealYear}.${el.dealMonth}.${el.dealDay}</p> 
                            <a href="<%= contextPath%>/jsp/aptDeal/searchaptdetail.jsp?aptNo=${el.aptNo}" class="btn btn-primary">ì•„íŒŒíŠ¸ ìƒì„¸ë³´ê¸°</a>
                            <button class="btn btn-primary" value=${index}>ì£¼ë³€ ìƒê°€ë³´ê¸°</button>
                          </div>
                        </div>
                        `;
        });
        document.querySelector("#placesList").innerHTML = listHtml;
        removeMarker(); // ë§ˆì»¤ ì‚­ì œê°€ ì•ˆë¨
        
        // # í•  ê²ƒ
        // 1. í´ëŸ¬ìŠ¤í„° í•˜ì§€ë§ê³  ë§ˆì»¤ë§Œ ìƒì„± (ë§ˆì»¤ì— mousehover ì´ë²¤íŠ¸ë¡œ ì•„íŒŒíŠ¸ì´ë¦„ ëœ¨ë„ë¡ í•˜ê¸°)& ì¤‘ê°„ ì§€ì ìœ¼ë¡œ position ì˜®ê¸°ê¸°
        // 2. ì•„íŒŒíŠ¸ ìì„¸íˆ ë³´ê¸°í•˜ë©´ ëª¨ë‹¬ì°½ ëœ¨ê³  ì•„íŒŒíŠ¸ ìƒì„¸ ë‚´ì—­ ëœ¨ê¸°
        // 3. ì•„íŒŒíŠ¸ ê°€ê²© ìˆœ ì •ë ¬ í•˜ê¸° btn ìƒì„±.(ì•Œê³ ë¦¬ì¦˜)
        // 4. ì•„íŒŒíŠ¸ ê´€ì‹¬ ì§€ì—­? ê´€ì‹¬ ì•„íŒŒíŠ¸ ì„¤ì • ê¸°ëŠ¥ ì¶”ê°€
        // 5. ì£¼ë³€ ì—…ì¢…(ë¶€ë™ì‚°) ë³´ì´ë„ë¡ í•˜ê¸° (ë§ˆì»¤ ê·¸ë¦¼ë§Œ ë‹¤ë¥´ê²Œ í•´ì„œ ë³´ì´ê¸°)
        // 6. ì•„íŒŒíŠ¸ ì¹´ë“œì— ì£¼ë³€ ì—…ì¢… í´ë¦­ì‹œ ì£¼ë³€ ì—…ì¢…(ë°˜ê²½ ~m ë‚´ ) ë¦¬ìŠ¤íŠ¸ ë³´ì´ë„ë¡ í•˜ê¸° 
        makeAptMarker(list);
        // document.querySelector("#placesList").onclick = function (e) {
        //   let index = e.target.value;
        //   let home = homeList[index];
        //   selectedHome = homeList[index];
        //   // getStore(home["lat"], home["lng"]);
        // };
      }

      function makeAptMarker(list) {
        list.forEach((el) => {
          // ë§ˆì»¤ê°€ í‘œì‹œë  ìœ„ì¹˜ì…ë‹ˆë‹¤
          var markerPosition = new kakao.maps.LatLng(el.lat, el.lng);
          // ë§ˆì»¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
          var marker = new kakao.maps.Marker({
            position: markerPosition,
          });

          markers.push(marker);
        });
        // í´ëŸ¬ìŠ¤í„°ëŸ¬ì— ë§ˆì»¤ë“¤ì„ ì¶”ê°€í•©ë‹ˆë‹¤
        clusterer.addMarkers(markers);
      }

      // ì§€ë„ ìœ„ì— í‘œì‹œë˜ê³  ìˆëŠ” ë§ˆì»¤ë¥¼ ëª¨ë‘ ì œê±°í•©ë‹ˆë‹¤
      function removeMarker() {
        console.log("ë§ˆì»¤ì‚­ì œ");
        clusterer.clear();
        markers = [];
      }
    </script>
  </body>
</html>
